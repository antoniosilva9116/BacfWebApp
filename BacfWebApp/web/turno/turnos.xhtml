<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:n="http://java.sun.com/jsf/core"
      xmlns:m="http://java.sun.com/jsf/html">
    <h:head>
        <title>Banco Alimentar</title>
        
        <link href="../webdesign/css/bacf.css" rel="stylesheet" />
        <!-- Bootstrap core CSS -->
        <link href="../webdesign/css/bootstrap.css" rel="stylesheet" />

        <!-- font Awesome -->
        <link href="../webdesign/font-awesome/css/font-awesome.css" rel="stylesheet"/>



        <!-- Ionicons -->
        <link href="../webdesign/css/ionicons.min.css" rel="stylesheet" type="text/css" />


        <link href="../webdesign/plugins/fullcalendar/fullcalendar.css" rel="stylesheet"/>


        <link href="../webdesign/plugins/select2/select2.css" rel="stylesheet"/>


        <!-- Admin LTE -->
        <link href="../webdesign/css/AdminLTE.css" rel="stylesheet" />

        <!-- SBAdmin Style -->
        <link href="../webdesign/css/sb-admin.css" rel="stylesheet" />
        <link href="../webdesign/css/style.css" rel="stylesheet"/>

        <link href="../resources/css/bootjsf.css" rel="stylesheet" />
        <link type="text/css" rel="stylesheet" href="/BacfWebApp/faces/javax.faces.resource/theme.css?ln=primefaces-bootstrap" />


        <script type="text/javascript">
            PrimeFaces.locales['pt'] = {
                closeText: 'Fechar',
                prevText: 'Anterior',
                nextText: 'Próximo',
                currentText: 'Começo',
                monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
                dayNames: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'],
                dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'],
                dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S'],
                weekHeader: 'Semana',
                firstDay: 1,
                isRTL: false,
                showMonthAfterYear: false,
                yearSuffix: '',
                timeOnlyTitle: 'Só Horas',
                timeText: 'Tempo',
                hourText: 'Hora',
                minuteText: 'Minuto',
                secondText: 'Segundo',
                currentText: 'Data Atual',
                        ampm: false,
                day: 'Dia',
                month: 'Mês',
                week: 'Semana',
                allDayText: 'Todo Dia'
            };
        </script>
    </h:head>
    <h:body onload="#{campanhaController.isCampanha()}">
        <f:metadata>
            <f:viewParam name="current" value="#{utilizadorController.user}" />
            <f:event type="preRenderView" listener="#{utilizadorController.validateSession}" />
        </f:metadata>
        <div id="modalbox">
            <div class="devoops-modal">
                <div class="devoops-modal-header">
                    <div class="modal-header-name">
                        <span>Basic table</span>
                    </div>
                    <div class="box-icons">
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="devoops-modal-inner">

                </div>
                <div class="devoops-modal-bottom">
                </div>
            </div>
        </div>
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                    <!-- You'll want to use a responsive image option so this logo looks good on devices - I recommend using something like retina.js (do a quick Google search for it and you'll find it) -->
                    <a class="navbar-brand logo-nav" href="home.xhtml">
                        <img src="http://placehold.it/150x75&amp;text=Logo" />
                    </a>

                </div>
                <ul class="nav navbar-nav navbar-left">
                    <li class="dropdown">
                        <ul class="nav navbar-nav navbar-left">
                            <li>	
                                <a href="#" class="show-sidebar">
                                    <i class="fa fa-bars"></i>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <div class="col-xs-8 col-sm-4">

                            <div id="search">
                                <input class="form-control" type="text" placeholder="search"/>
                                <i class="fa fa-search"></i>
                            </div>
                        </div>

                    </li>
                </ul>



                <div class="collapse navbar-collapse navbar-ex1-collapse">



                    <div class="collapse navbar-collapse navbar-ex1-collapse">
                        <div class="row">

                            <div class="collapse navbar-collapse navbar-ex1-collapse">
                                <ul class="nav navbar-nav navbar-right">
                                    <li class="dropdown">
                                        <ul class="nav navbar-nav navbar-right">

                                            <li><a href="about.html">About</a>
                                            </li>
                                            <li><a href="contact.html">Contact</a>
                                            </li>
                                            <li class="dropdown">
                                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i>  #{utilizadorController.selected.userName} <b class="caret"></b></a>
                                                <ul class="dropdown-menu">
                                                    <li><a href="#"><i class="fa fa-user"></i> Profile</a></li>
                                                    <li><a href="#"><i class="fa fa-envelope"></i> Inbox <span class="badge">7</span></a></li>
                                                    <li><a href="#"><i class="fa fa-gear"></i> Settings</a></li>
                                                    <li class="divider"></li>
                                                    <li><h:form class="drop-item"><h:commandLink class=" fa fa-sign-out label" action="#{utilizadorController.logout}" value=" Log Out" ></h:commandLink></h:form></li>   
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </nav>
        <div id="main" class="container-f">
            <div id="sidebar-left" class="col-xs-2 col-sm-2">
                <ul class="nav main-menu">


                    <li>
                        <a href="perfil.xhtml" target="${utilizadorController.user.getUtilizadorID()}" class="active">
                            <i class="fa fa-dashboard"></i>
                            <span class="hidden-xs">Perfil</span>
                        </a>
                    </li>

                    <li>
                        <a href="../turno/turnos.xhtml">
                            <i class="fa fa-calendar"></i>
                            <span class="hidden-xs">Campanha</span>
                        </a>
                    </li>
                    <li>
                        <a href="equipas.xhtml" >


                            <i class="fa fa-calendar"></i>
                            <span class="hidden-xs">Equipas</span>
                        </a>
                    </li>

                </ul>
            </div>
            <div class="row">

                <!--Start Content-->


                <div id="content" class="col-xs-12 col-sm-10">

                    <div id="ajax-content">
                        <div id="page-wrapper" >
                            <b:container>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <h1 class="page-header">Turnos <small>Criar Turnos</small></h1>
                                        <p>Utilize o formul&aacute;rio abaixo para criar os turnos.</p>

                                        <div id="conteudo">
                                            <h:form>
                                                <h2 class="page-header">Campanhas <small>datas das campanhas disponiveis </small></h2>
                                                <!--<p>Utilize o widget para selecionar o dia da campanha e selecionar o supermercado.</p>-->
                                                <b:well>
                                                    <h4>Utilize o widget para selecionar o dia da campanha e selecionar o supermercado.</h4>
                                                    <p></p>
                                                       <br></br>
                                                    <b:row>
                                                        <b:column col-xs="6" span="6"  >
                                                            <h:outputLabel value="Data de Campanha" /> 
                                                            <p>
                                                                <p:calendar   value="#{campanhaController.dataSelected.date}" 
                                                                              mindate="#{campanhaController.selected.dataInicio}" 
                                                                              maxdate="#{campanhaController.selected.dataFim}"
                                                                              pattern="dd/MM/yyyy" disabled="#{(campanhaController.isCampanha()==true)?false:true}"
                                                                              />
                                                            </p>
                                                        </b:column>
                                                        <b:column col-xs="6" span="6">
                                                            <h:outputLabel value="Supermercado"/>                                         
                                                            <p:selectOneMenu value="#{turnosController.estabelecimento}" 
                                                                             style="width:100%; background:#ffffff;"
                                                                             converter="#{estabelecimentoConverter}" disabled="#{(campanhaController.isCampanha()==true)?false:true}">  
                                                                <f:selectItems value="#{turnosController.allEstabelecimentos}" itemLabel="#{estabelecimento}" 
                                                                               itemValue="#{estabelecimento}" var="estabelecimento"/>                                             
                                                            </p:selectOneMenu> 
                                                        </b:column>
                                                        <br></br>                                        <br></br>

                                                        <b:column col-xs="12" col-md="8" col-sm="6" span="6">
                                                            <b:column col-xs="6" span="6" offset="6">
                                                                <b:column col-xs="8" span="7" offset="7">                    

                                                                    <b:commandButton style="margin-top: 15px;" icon="edit"  size="sm" look="primary" 
                                                                                     oncomplete="meucalendario.update()" value="  Selecionar"  update="conteudo" />

                                                                </b:column>
                                                            </b:column>
                                                        </b:column>
                                                        <br></br>

                                                    </b:row>
                                                </b:well>
                                                <br></br>
                                                <p:messages id="mensagens" showDetail="true" />
                                                <p:schedule value="#{turnosController.eventModel}" id="conteudo" initialDate="#{campanhaController.dataSelected.date}" rendered="#{campanhaController.isCampanha()}"
                                                            view="agendaDay" widgetVar="meucalendario"   
                                                            rightHeaderTemplate="agendaDay" locale="pt"
                                                            leftHeaderTemplate="">
                                                    <!-- eventos -->
                                                    <p:ajax event="dateSelect" listener="#{turnosController.addNewTurno}" 
                                                            update="details" oncomplete="caixaDialogo.show()" />  
                                                    <p:ajax event="eventSelect" listener="#{turnosController.showTurno}" 
                                                            update="details" oncomplete="caixaDialogo.show()" />  
                                                    <p:ajax event="eventMove" listener="#{turnosController.whenMoved}" 
                                                            oncomplete="meucalendario.update()" />  
                                                    <p:ajax event="eventResize" listener="#{turnosController.whenSetDate}" 
                                                            oncomplete="meucalendario.update()"/>  
                                                </p:schedule>

                                                <p:dialog id="details" widgetVar="caixaDialogo" 
                                                          header="Turno Campanha"  width="800" position="center"
                                                          resizable="false" modal="true"
                                                          showEffect="clip" hideEffect="clip" closeOnEscape="true" dynamic="true">

                                                    <p:outputPanel 
                                                        id="eventDetails">
                                                        <ui:define name="content">
                                                            <b:row >
                                                                <b:column col-lg="6" span="6" offset="3"><h:outputText value="span=6 offset=3"/></b:column>
                                                            </b:row>
                                                        </ui:define>

                                                        <b:row>
                                                            <b:column span="6" offset="3">
                                                                <h:outputLabel value="Descri&ccedil;&atilde;o" /> 
                                                                <p>
                                                                    <p:inputText 
                                                                        id="descricao" 
                                                                        maxlength="60"                                            
                                                                        required="true"
                                                                        value="#{campanhaController.selected.descricao}" disabled="true" />
                                                                </p>
                                                            </b:column>
                                                        </b:row>
                                                        <b:row>
                                                            <b:column span="6" offset="3">
                                                                <h:outputLabel value="Hora Início" />  
                                                                <p>
                                                                    <p:calendar id="inicio" 
                                                                                required="true"
                                                                                value="#{turnosController.selected.horaInicio}" 
                                                                                pattern="dd/MM/yyyy HH:mm" 
                                                                                mindate="#{campanhaController.getMinRange(campanhaController.dataSelected.date)}" 
                                                                                maxdate="#{campanhaController.getMaxRange(campanhaController.dataSelected.date)}"/>

                                                                </p>
                                                            </b:column>
                                                        </b:row>

                                                        <b:row>
                                                            <b:column span="6" offset="3">
                                                                <h:outputLabel value="Hora Fim" />  
                                                                <p>
                                                                    <p:calendar id="fim" 
                                                                                required="true"
                                                                                value="#{turnosController.selected.horaFim}" 
                                                                                pattern="dd/MM/yyyy HH:mm"
                                                                                mindate="#{campanhaController.getMinRange(campanhaController.dataSelected.date)}" 
                                                                                maxdate="#{campanhaController.getMaxRange(campanhaController.dataSelected.date)}"/>

                                                                </p>
                                                            </b:column>
                                                        </b:row>

                                                    </p:outputPanel>
                                                    <b:jumbotron>
                                                         <h2>Volunt&aacute;rios dispon&iacute;veis. </h2>
                                                        <p>Selecione os volunt&aacute;rios que pretende adicionar.</p>                                                       
                                                        <b:row>
                                                            <p:growl id="msg" showDetail="true" escape="false"  sticky="true" />
                                                                <p:pickList styleClass="ui-pick" value="#{turnosController.voluntarios}" 
                                                                            var="voluntario" effect="" itemLabel="#{voluntario}" 
                                                                            itemValue="#{voluntario}" showSourceControls="true" 
                                                                            showTargetControls="true" showSourceFilter="true" 
                                                                            showTargetFilter="true" filterMatchMode="contains" converter="#{voluntarioConverter}">

                                                                        <f:facet  name="sourceCaption">Dispon&iacute;veis</f:facet>
                                                                        <f:facet name="targetCaption">Adicionados</f:facet>
                                                                 
                                                                        <p:ajax event="transfer" listener="#{turnosController.onTransfer}" update="msg" />
                                                                 
                                                                        <p:column>
                                                                                <h:outputText value="#{voluntario.getNome()}" />
                                                                            </p:column>
                                                                    </p:pickList>

                                                        </b:row>                                                                                    
                                                    </b:jumbotron>

                                                    <f:facet name="footer">

                                                        <b:row >
                                                            <b:column col-xs="12" col-md="8" col-sm="6" span="9">
                                                                <b:column col-xs="6" span="9" offset="6">
                                                                    <b:column col-xs="8" span="9" offset="7">
                                                                            <b:commandButton look="primary" size="lg"
                                                                                             id="pojoSubmit" value=" Guardar " 
                                                                                             icon="save" update="displayThemes"
                                                                                             actionListener="#{turnosController.values}" 
                                                                                             style="margin-top:15px; margin-left: 30px; margin-bottom: 15px;" >
                                                                            <f:attribute name="campanha" value="#{campanhaController.selected}" />     
                                                                            <f:attribute name="data" value="#{campanhaController.dataSelected.date}" />

                                                                        </b:commandButton>

                                                                    </b:column>
                                                                </b:column>
                                                            </b:column>


                                                        </b:row>

                                                    </f:facet>
                                                </p:dialog>  
                                            </h:form> 
                                        </div><!-- end fluid-container -->
                                    </div>
                                </div>

                            </b:container>
                        </div>
                    </div>
                </div>

                <!--End Content-->
            </div>
        </div>
      <!--End Container-->
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <!--<script src="http://code.jquery.com/jquery.js"></script>-->
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="../webdesign/js/bootstrap.js"></script>


        <script src="../webdesign/plugins/tinymce/tinymce.min.js"></script>

        <!-- bootstrap wysihtml5 - text editor -->
        <link href="../webdesign/js/plugins/bootstrap3-wysihtml5.all.min.js" rel="stylesheet" type="text/javascript" />


        <!-- Page Specific Plugins -->
        <script src="../webdesign/js/tablesorter/jquery.tablesorter.js"></script>
        <script src="../webdesign/js/tablesorter/tables.js"></script>

        <script src="../webdesign/plugins/tinymce/jquery.tinymce.min.js"></script>
        <!-- All functions for this theme + document.ready processing -->
        <script src="../webdesign/js/validator.js"></script>
        <script src="../webdesign/js/AdminLTE/app.js" type="text/javascript"></script>

    </h:body>
</html>